<Window x:Class="TAlex.Testcheck.Tester.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:TAlex.Testcheck.Tester.Controls"
    xmlns:convs="clr-namespace:TAlex.Testcheck.Tester.Converters"
    xmlns:beh="clr-namespace:TAlex.Testcheck.Tester.Behaviours"
    Title="Testcheck Tester" MinHeight="400" MinWidth="400" Height="600" Width="800" Topmost="True" WindowStartupLocation="CenterScreen"
    Loaded="Window_Loaded">
    
    <Window.Resources>
        <convs:QuestionToTesterControlConverter x:Key="QuestionToTesterControlConverter" />
        <convs:QuestionDescriptionToHtmlConverter x:Key="QuestionDescriptionToHtmlConverter" />
        
        <SolidColorBrush x:Key="TextBrush" Color="DimGray" />
        
        <LinearGradientBrush x:Key="ButtonBgBrush" EndPoint="0,1">
            <GradientStop Color="#fff3f3f3" Offset="0" />
            <GradientStop Color="#ffebebeb" Offset="0.499" />
            <GradientStop Color="#ffdddddd" Offset="0.5" />
            <GradientStop Color="#ffcecece" Offset="1" />
        </LinearGradientBrush>
    </Window.Resources>
    
    <Grid Background="WhiteSmoke">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="150" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="22" />
            <RowDefinition Height="*" />
            <RowDefinition Height="60" />
            <RowDefinition Height="23" />
        </Grid.RowDefinitions>

        <Menu Grid.ColumnSpan="2" BorderThickness="0,0,0,1" BorderBrush="#ffeaeaea">
            <Menu.Background>
                <LinearGradientBrush EndPoint="0,1">
                    <GradientStop Color="#fff5f5f5" Offset="0" />
                    <GradientStop Color="#ffe0e0e0" Offset="0.5" />
                    <GradientStop Color="WhiteSmoke" Offset="1" />
                </LinearGradientBrush>
            </Menu.Background>
            
            <MenuItem Header="_File">
                <MenuItem Header="E_xit" InputGestureText="Alt+F4" Click="exitMenuItem_Click" />
            </MenuItem>
        </Menu>

        <Grid Grid.Row="1" Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition MinHeight="80" Height="*" />
                <RowDefinition Height="5" />
                <RowDefinition MinHeight="50" Height="150" />
            </Grid.RowDefinitions>
            
            <GridSplitter Grid.Row="1" ResizeDirection="Rows" HorizontalAlignment="Stretch">
                <GridSplitter.Background>
                    <LinearGradientBrush EndPoint="0,1">
                        <GradientStop Color="WhiteSmoke" Offset="0" />
                        <GradientStop Color="#d0d0d0" Offset="1" />
                    </LinearGradientBrush>
                </GridSplitter.Background>
            </GridSplitter>
            
            <Border Grid.Row="0" BorderBrush="Gray">
                <WebBrowser Grid.Row="0" beh:BrowserBehavior.Html="{Binding CurrentQuestion.Description, Converter={StaticResource QuestionDescriptionToHtmlConverter}}" PreviewKeyDown="questionWebBrowser_PreviewKeyDown" />
            </Border>

            <ScrollViewer Grid.Row="2" Background="White" Content="{Binding CurrentQuestion, Converter={StaticResource QuestionToTesterControlConverter}}" />
        </Grid>
        
        <Label Grid.Row="1" Grid.Column="1" Margin="35,5,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Foreground="{StaticResource TextBrush}">Time elapsed:</Label>
        <Label Grid.Row="1" Grid.Column="1" Margin="35,20,0,0" Name="timeElapsedLabel" VerticalAlignment="Top" HorizontalAlignment="Left"  Foreground="{StaticResource TextBrush}"></Label>
        
        <Label Grid.Row="1" Grid.Column="1" Margin="35,45,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Foreground="{StaticResource TextBrush}">Time left:</Label>
        <Label Grid.Row="1" Grid.Column="1" Margin="35,60,0,0" Name="timeLeftLabel" VerticalAlignment="Top" HorizontalAlignment="Left" Foreground="{DynamicResource TextBrush}"></Label>

        <controls:TestProgressBar Grid.Row="1" Grid.Column="1" Margin="0,100,0,25" TotalPoints="{Binding TotalPoints}" ScoredPoints="{Binding ScoredPoints}" PossiblePoints="{Binding PossiblePoints}" />
               
        <!-- Control panel -->
        <Grid Grid.Row="2" Grid.ColumnSpan="2">
            <Grid.Background>
                <LinearGradientBrush EndPoint="0,1">
                    <GradientStop Color="WhiteSmoke" Offset="0" />
                    <GradientStop Color="Silver" Offset="1" />
                </LinearGradientBrush>
            </Grid.Background>

            <Grid Width="250" Margin="5">                
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button Margin="0,5,10,5" Grid.Column="0" Background="{StaticResource ButtonBgBrush}" BorderBrush="Silver" Focusable="False" ToolTip="Previous question" Command="{Binding MovePreviousCommand}">
                    <Image Source="..\Resources\Images\previous.png" />
                </Button>

                <Button Margin="10,0,10,0" Grid.Column="1" Background="{StaticResource ButtonBgBrush}" BorderBrush="Silver" Focusable="False" ToolTip="Accept answer" Command="{Binding AcceptCommand}">
                    <Image Source="..\Resources\Images\accept.png" />
                </Button>

                <Button Margin="10,5,0,5" Grid.Column="2" Background="{StaticResource ButtonBgBrush}" BorderBrush="Silver" Focusable="False" ToolTip="Next question" Command="{Binding MoveNextCommand}">
                    <Image Source="..\Resources\Images\forward.png" />
                </Button>
            </Grid>
        </Grid>

        <StatusBar Grid.Row="3" Grid.ColumnSpan="2">
            <StatusBar.Background>
                <LinearGradientBrush EndPoint="0,1">
                    <GradientStop Color="WhiteSmoke" Offset="0" />
                    <GradientStop Color="Silver" Offset="0.05" />
                    <GradientStop Color="WhiteSmoke" Offset="1" />
                </LinearGradientBrush>
            </StatusBar.Background>
            
            <StatusBarItem Content="Question" Foreground="{StaticResource TextBrush}" />

            <StatusBarItem Content="{Binding CurrentQuestionNumber}" Foreground="{StaticResource TextBrush}" />
            <StatusBarItem Content="of" Foreground="{StaticResource TextBrush}" />
            <StatusBarItem Content="{Binding QuestionsCount}" Foreground="{StaticResource TextBrush}" />
        </StatusBar>
    </Grid>
</Window>
